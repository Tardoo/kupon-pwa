<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kupon & Zeplin Oyunu</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0b1d2a">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  padding: 15px;
}

h2 { text-align: center; }

.card {
  background: #fff;
  padding: 15px;
  border-radius: 12px;
  margin-bottom: 20px;
}

select, input {
  width: 100%;
  padding: 8px;
  margin: 6px 0;
}

button {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  border: none;
  border-radius: 8px;
  font-size: 16px;
}

.play { background:#2ecc71; color:#fff; }
.start { background:#3498db; color:#fff; }
.cashout { background:#e67e22; color:#fff; }

#zeppelin {
  background:#0b1d2a;
  color:#fff;
  border-radius:12px;
  padding:15px;
  text-align:center;
}

#crashCanvas {
  background:#081621;
  border-radius:8px;
  margin:10px auto;
  display:block;
}
</style>
</head>

<body>

<h2>âš½ Futbol Kupon Oyunu</h2>

<div class="card">
  <p><strong>COIN:</strong> <span id="coin">1000</span></p>

  <label>MaÃ§ SeÃ§</label>
  <select id="match">
    <option value="1.80">FB â€“ GS (1.80)</option>
    <option value="2.10">BJK â€“ TS (2.10)</option>
    <option value="1.60">RM â€“ BAR (1.60)</option>
  </select>

  <label>Bahis (COIN)</label>
  <input type="number" id="couponBet" value="100" min="10">

  <button class="play" onclick="playCoupon()">Kupon Oyna</button>
  <p id="couponResult"></p>
</div>

<h2>ðŸŽˆ Zeplin (Crash) Oyunu</h2>

<div id="zeppelin">
  <input type="number" id="bet" value="50" min="10">

  <canvas id="crashCanvas" width="300" height="200"></canvas>

  <h3><span id="multiplier">1.00x</span></h3>

  <button class="start" onclick="startGame()">BaÅŸlat</button>
  <button class="cashout" onclick="cashOut()">Ã‡ek</button>

  <p id="status">HazÄ±r</p>
</div>

<!-- SESLER -->
<audio id="startSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="cashSound" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg"></audio>
<audio id="crashSound" src="https://actions.google.com/sounds/v1/explosions/explosion.ogg"></audio>

<script>
/* ===== COIN ===== */
let coin = Number(localStorage.getItem("coin")) || 1000;
document.getElementById("coin").innerText = coin;

function updateCoin() {
  document.getElementById("coin").innerText = coin;
  localStorage.setItem("coin", coin);
}

/* ===== KUPON ===== */
function playCoupon() {
  const odd = Number(document.getElementById("match").value);
  const bet = Number(document.getElementById("couponBet").value);

  if (bet > coin) return alert("Yetersiz COIN");

  coin -= bet;
  const win = Math.random() < 0.5;

  if (win) {
    const gain = Math.floor(bet * odd);
    coin += gain;
    document.getElementById("couponResult").innerText =
      "âœ… Kupon kazandÄ±! +" + gain + " COIN";
  } else {
    document.getElementById("couponResult").innerText =
      "âŒ Kupon kaybetti";
  }

  updateCoin();
}

/* ===== ZEP LÄ°N (CRASH) ===== */
const canvas = document.getElementById("crashCanvas");
const ctx = canvas.getContext("2d");

let multiplier = 1;
let crashPoint = 0;
let betAmount = 0;
let playing = false;
let interval = null;

let x = 20;
let y = canvas.height - 20;

const startSound = document.getElementById("startSound");
const cashSound = document.getElementById("cashSound");
const crashSound = document.getElementById("crashSound");

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.strokeStyle = "#2ecc71";
  ctx.beginPath();
  ctx.moveTo(20, canvas.height-20);
  ctx.lineTo(x, y);
  ctx.stroke();
  ctx.font="20px Arial";
  ctx.fillText("ðŸŽˆ", x-10, y-10);
}

function startGame() {
  if (playing) return;

  betAmount = Number(document.getElementById("bet").value);
  if (betAmount > coin) return alert("Yetersiz COIN");

  startSound.play();
  coin -= betAmount;
  updateCoin();

  multiplier = 1;
  crashPoint = Math.random()*4 + 1.5;
  playing = true;
  x = 20;
  y = canvas.height - 20;

  interval = setInterval(() => {
    multiplier += 0.02;
    x += 2;
    y -= 1.5;

    document.getElementById("multiplier").innerText =
      multiplier.toFixed(2)+"x";

    draw();

    if (multiplier >= crashPoint || y <= 20) crash();
  },100);
}

function cashOut() {
  if (!playing) return;
  clearInterval(interval);
  cashSound.play();

  const win = Math.floor(betAmount * multiplier);
  coin += win;
  updateCoin();

  document.getElementById("status").innerText =
    "ðŸŽ‰ KazandÄ±n +" + win + " COIN";
  playing = false;
}

function crash() {
  clearInterval(interval);
  crashSound.play();
  ctx.font="30px Arial";
  ctx.fillText("ðŸ’¥", x-15, y-10);
  document.getElementById("status").innerText = "ðŸ’¥ Zeplin patladÄ±";
  playing = false;
}

/* ===== PWA ===== */
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
